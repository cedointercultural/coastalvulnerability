---
title: "Indicator analysis"
output: html_notebook
---

Set environment

```{r}
#rebuild and load the package
devtools::load_all() # restarts and loads

# List of packages for session
.packages = c("import")

# Install CRAN packages (if not already installed)
.inst <- .packages %in% installed.packages()
if(length(.packages[!.inst]) > 0) install.packages(.packages[!.inst])

# Load packages into session 
#lapply(.packages, require, character.only=TRUE)

#specifies what functions to import
# https://cran.r-project.org/web/packages/import/vignettes/import.html
import::from(dplyr, mutate, distinct, select, group_by, summarise, keep_when = filter)



```
Set data folder
```{r}
#set data dir
input.dir <- "~/coastalvulnerability-inputs"

```

read indicator table
```{r read indicators, eval=FALSE, include=FALSE}
#googlesheet with list of indicators
googlesheets4::gs4_deauth()

indicator.index <- googlesheets4::read_sheet("1yaA-tGQGDU7sz5ZYt61D9IaLI4L2G8r3LIeaA3jf8vw", sheet="indicators")


```

Combine sensitivity indices and standarize
```{r}

indicator.list <- list.files(path=here::here("data-raw","processed_data","sensitivity"), pattern = "*.csv", full.names = TRUE)

merge_files <- function(indicator.list){
  
  indicator.no <- 
  this.data <- readr::read_csv(indicator.list[1])
  
  for(eachfile in 2:length(indicator.list)){
    
    this.new.data <- readr::read_csv(indicator.list[eachfile])
    
    this.data <- this.new.data %>% 
      dplyr::left_join(this.data, by = c("CVE_LOC","CVE_ENT"))
      
    
  }
  
}

```

